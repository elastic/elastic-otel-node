#!/usr/bin/env node

/*
 * Copyright Elasticsearch B.V. and contributors
 * SPDX-License-Identifier: Apache-2.0
 */

// Based on opentelemetry-js-contrib/scripts/version-update.js

const fs = require('fs');
const path = require('path');

const TOP = path.resolve(__dirname, '..');
const header = fs.readFileSync(
  path.resolve(TOP, '..', '..', 'scripts', 'license-header.js'),
  'utf8'
);
const pj = require(path.resolve(__dirname, '..', 'package.json'));

const content = `${header}
// This file is autogenerated, see scripts/gen-version-ts.js
export const PACKAGE_VERSION = '${pj.version}';
export const PACKAGE_NAME = '${pj.name}';
`;

fs.writeFileSync(path.join(TOP, 'src', 'version.ts'), content, 'utf8');
